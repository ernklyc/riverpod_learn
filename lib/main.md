# main.dart - Kapsamlƒ± ve Detaylƒ± A√ßƒ±klama

## üéØ Bu Dosya Ne ƒ∞√ßin Var?

Bu dosya, Flutter uygulamanƒ±zƒ±n **ana giri≈ü noktasƒ±dƒ±r**. Yani uygulamanƒ±z a√ßƒ±ldƒ±ƒüƒ±nda ilk √ßalƒ±≈üan dosyadƒ±r. Bu dosya olmadan uygulamanƒ±z √ßalƒ±≈ümaz. Riverpod ile state management, routing sistemi ve genel uygulama ayarlarƒ± burada yapƒ±landƒ±rƒ±lƒ±r.

---

## üß† main.dart Nedir? (√áok Basit Anlatƒ±m)

D√º≈ü√ºn√ºn ki bir **apartman binasƒ±nƒ±n ana kapƒ±sƒ±** var. Bu kapƒ±dan ge√ßmeden apartmana giremezsiniz. ƒ∞≈üte `main.dart` de b√∂yle bir ana kapƒ± gibidir. Uygulamanƒ±za girmek i√ßin bu kapƒ±dan ge√ßmek zorundasƒ±nƒ±z. Bu dosyada uygulamanƒ±n genel ayarlarƒ±, tema, dil desteƒüi ve routing sistemi ayarlanƒ±r.

### main.dart'ƒ±n √ñzellikleri:
1. **Uygulama ba≈ülangƒ±√ß noktasƒ±** (main() fonksiyonu)
2. **ProviderScope ile Riverpod aktif edilir**
3. **MaterialApp ile Flutter UI sistemi kurulur**
4. **Routing sistemi konfig√ºre edilir**
5. **Tema ve renk ayarlarƒ±**
6. **Debug banner kontrol√º**

---

## üìù Kodun Satƒ±r Satƒ±r, Kelime Kelime A√ßƒ±klamasƒ±

### Kod Analizi:
```dart
import 'package:flutter/material.dart';
import 'package:flutter_riverpod/flutter_riverpod.dart';
import 'package:riverpod_learn/routes/app_router.dart';

void main() {
  runApp(const ProviderScope(child: MyApp()));
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp.router(
      title: 'Riverpod Learn',
      debugShowCheckedModeBanner: false,
      routerConfig: AppRouter.router,
    );
  }
}
```

**Ne yapar bu kod?**

### 1. Import Satƒ±rlarƒ±:
```dart
import 'package:flutter/material.dart';
import 'package:flutter_riverpod/flutter_riverpod.dart';
import 'package:riverpod_learn/routes/app_router.dart';
```

**Her satƒ±r ne i≈üe yarar?**
- **Material paketi**: Flutter'ƒ±n Material Design widget'larƒ±nƒ± kullanmak i√ßin
- **Riverpod paketi**: State management i√ßin Riverpod sistemini aktif etmek i√ßin
- **AppRouter**: Uygulamanƒ±n routing (sayfa ge√ßi≈üleri) sistemini y√∂netmek i√ßin

### 2. main() Fonksiyonu:
```dart
void main() {
  runApp(const ProviderScope(child: MyApp()));
}
```

**Kelime kelime a√ßƒ±klama:**
- `void main()`: Dart dilinde programƒ±n ba≈ülangƒ±√ß fonksiyonu
- `runApp()`: Flutter'a "bu widget'ƒ± uygulamanƒ±n k√∂k√º yap" der
- `ProviderScope`: Riverpod'u t√ºm uygulamada kullanƒ±labilir hale getirir
- `child: MyApp()`: MyApp widget'ƒ±nƒ± ProviderScope'un √ßocuƒüu yapar

**Neden ProviderScope gerekli?**
- Riverpod provider'larƒ±nƒ± kullanabilmek i√ßin ≈üart
- T√ºm uygulamayƒ± sarmallar
- Provider'lar arasƒ± ileti≈üimi saƒülar

### 3. MyApp Sƒ±nƒ±fƒ±:
```dart
class MyApp extends StatelessWidget {
  const MyApp({super.key});
```

**Ne yapar?**
- `StatelessWidget`: Deƒüi≈ümeyen bir widget sƒ±nƒ±fƒ±
- `const MyApp({super.key})`: Constructor (yapƒ±cƒ± fonksiyon)
- Widget optimization i√ßin gerekli

### 4. MaterialApp.router Konfig√ºrasyonu:
```dart
return MaterialApp.router(
  title: 'Riverpod Learn',
  debugShowCheckedModeBanner: false,
  routerConfig: AppRouter.router,
);
```

**Her parametre ne i≈üe yarar?**
- `title`: Uygulamanƒ±n adƒ± (i≈ületim sisteminde g√∂r√ºn√ºr)
- `debugShowCheckedModeBanner: false`: "DEBUG" yazƒ±sƒ±nƒ± gizler
- `routerConfig: AppRouter.router`: Go_router sistemi kullanƒ±r

---

## üõ£Ô∏è Routing Sistemi (Go_Router)

### AppRouter.router Nedir?
Bu projede **Go_Router** paketi kullanƒ±lƒ±yor. Bu paket:
- **Modern routing sistemi** saƒülar
- **URL tabanlƒ±** navigasyon yapar
- **Deep linking** destekler
- **Route guards** (sayfa koruma) √∂zelliƒüi var

### √ñrnek Route Tanƒ±mlarƒ±:
```dart
// Muhtemelen app_router.dart dosyasƒ±nda ≈ü√∂yle tanƒ±mlar var:
final router = GoRouter(
  routes: [
    GoRoute(
      path: '/',
      builder: (context, state) => HomePage(),
    ),
    GoRoute(
      path: '/provider',
      builder: (context, state) => ProviderPage(),
    ),
    GoRoute(
      path: '/state-provider',
      builder: (context, state) => StateProviderPage(),
    ),
    GoRoute(
      path: '/future-provider',
      builder: (context, state) => FutureProviderPage(),
    ),
    // ... daha fazla route
  ],
);
```

---

## üé® Tema ve G√∂rsel Ayarlar

### Basit Tema Ekleme:
```dart
class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp.router(
      title: 'Riverpod Learn',
      debugShowCheckedModeBanner: false,
      
      // Aydƒ±nlƒ±k tema
      theme: ThemeData(
        primarySwatch: Colors.blue,
        visualDensity: VisualDensity.adaptivePlatformDensity,
      ),
      
      // Karanlƒ±k tema
      darkTheme: ThemeData.dark().copyWith(
        primaryColor: Colors.purple,
      ),
      
      // Sistem temasƒ±nƒ± takip et
      themeMode: ThemeMode.system,
      
      routerConfig: AppRouter.router,
    );
  }
}
```

### Riverpod ile Dinamik Tema:
```dart
class MyApp extends ConsumerWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    // Tema provider'ƒ±nƒ± izle
    final isDarkTheme = ref.watch(themeChangeProvider);
    
    return MaterialApp.router(
      title: 'Riverpod Learn',
      debugShowCheckedModeBanner: false,
      
      // Dinamik tema
      theme: isDarkTheme ? ThemeData.dark() : ThemeData.light(),
      
      routerConfig: AppRouter.router,
    );
  }
}
```

---

## üåç Lokalizasyon (√áoklu Dil) Desteƒüi

### Basit Lokalizasyon Ekleme:
```dart
import 'package:flutter_localizations/flutter_localizations.dart';

class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp.router(
      title: 'Riverpod Learn',
      debugShowCheckedModeBanner: false,
      
      // Dil desteƒüi
      localizationsDelegates: [
        GlobalMaterialLocalizations.delegate,
        GlobalWidgetsLocalizations.delegate,
        GlobalCupertinoLocalizations.delegate,
      ],
      supportedLocales: [
        Locale('tr', 'TR'), // T√ºrk√ße
        Locale('en', 'US'), // ƒ∞ngilizce
      ],
      locale: Locale('tr', 'TR'), // Varsayƒ±lan dil
      
      routerConfig: AppRouter.router,
    );
  }
}
```

---

## üîß Geli≈ümi≈ü main.dart √ñrnekleri

### 1. Error Handling ile main.dart:
```dart
import 'package:flutter/foundation.dart';
import 'package:flutter/services.dart';

void main() async {
  // Widget binding'i ba≈ülat
  WidgetsFlutterBinding.ensureInitialized();
  
  // Error handling
  if (kDebugMode) {
    // Debug modda hatalarƒ± g√∂ster
  } else {
    // Production modda hatalarƒ± logla
    FlutterError.onError = (details) {
      // Crash reporting servisi (Firebase Crashlytics vb.)
      print('Flutter Error: ${details.exception}');
    };
  }
  
  // Orientation kilitle
  await SystemChrome.setPreferredOrientations([
    DeviceOrientation.portraitUp,
    DeviceOrientation.portraitDown,
  ]);
  
  runApp(const ProviderScope(child: MyApp()));
}
```

### 2. SharedPreferences ile Ba≈ülangƒ±√ß Verisi:
```dart
import 'package:shared_preferences/shared_preferences.dart';

void main() async {
  WidgetsFlutterBinding.ensureInitialized();
  
  // SharedPreferences'ƒ± ba≈ülat
  final prefs = await SharedPreferences.getInstance();
  final isFirstTime = prefs.getBool('isFirstTime') ?? true;
  
  runApp(ProviderScope(
    overrides: [
      // Provider'lara ba≈ülangƒ±√ß deƒüeri ver
      isFirstTimeProvider.overrideWith((ref) => isFirstTime),
    ],
    child: MyApp(),
  ));
}
```

### 3. Firebase ile main.dart:
```dart
import 'package:firebase_core/firebase_core.dart';

void main() async {
  WidgetsFlutterBinding.ensureInitialized();
  
  // Firebase'i ba≈ülat
  await Firebase.initializeApp();
  
  runApp(const ProviderScope(child: MyApp()));
}
```

### 4. Geli≈ümi≈ü MyApp Widget'ƒ±:
```dart
class MyApp extends ConsumerWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    // Birden fazla provider'ƒ± izle
    final isDarkTheme = ref.watch(themeChangeProvider);
    final locale = ref.watch(localeProvider);
    final isLoading = ref.watch(appLoadingProvider);
    
    // Loading ekranƒ± g√∂ster
    if (isLoading) {
      return MaterialApp(
        home: Scaffold(
          body: Center(
            child: CircularProgressIndicator(),
          ),
        ),
      );
    }
    
    return MaterialApp.router(
      title: 'Riverpod Learn',
      debugShowCheckedModeBanner: false,
      
      // Dinamik tema
      theme: isDarkTheme 
          ? AppThemes.darkTheme 
          : AppThemes.lightTheme,
      
      // Dinamik dil
      locale: locale,
      localizationsDelegates: AppLocalizations.localizationsDelegates,
      supportedLocales: AppLocalizations.supportedLocales,
      
      // Custom scroll behavior
      scrollBehavior: MyCustomScrollBehavior(),
      
      // Route konfig√ºrasyonu
      routerConfig: AppRouter.router,
      
      // Builder ile ek √∂zellikler
      builder: (context, child) {
        return MediaQuery(
          // Font scaling'i sƒ±nƒ±rla
          data: MediaQuery.of(context).copyWith(
            textScaleFactor: 1.0,
          ),
          child: child!,
        );
      },
    );
  }
}
```

---

## üéØ Ne Zaman main.dart'ƒ± √ñzelle≈ütirmelisiniz?

### ‚úÖ √ñzelle≈ütirin:
1. **Tema sistemi** eklerken
2. **√áoklu dil desteƒüi** i√ßin
3. **Firebase entegrasyonu** yaparken
4. **Global error handling** i√ßin
5. **App initialization** gerektiren servisler i√ßin
6. **Custom navigation** sistemi kurarken

### ‚ùå √ñzelle≈ütirmeyin:
1. **Basit uygulamalar** i√ßin
2. **Tek sayfa uygulamalar** i√ßin
3. **Prototype geli≈ütirme** a≈üamasƒ±nda

---

## üß™ main.dart Test Etme

### Widget Test:
```dart
import 'package:flutter_test/flutter_test.dart';

void main() {
  testWidgets('MyApp should build without error', (WidgetTester tester) async {
    // MyApp'i test et
    await tester.pumpWidget(
      ProviderScope(
        child: MyApp(),
      ),
    );
    
    // App'in y√ºklendiƒüini doƒürula
    expect(find.byType(MaterialApp), findsOneWidget);
  });
  
  testWidgets('App should have correct title', (WidgetTester tester) async {
    await tester.pumpWidget(
      ProviderScope(
        child: MyApp(),
      ),
    );
    
    final app = tester.widget<MaterialApp>(find.byType(MaterialApp));
    expect(app.title, 'Riverpod Learn');
  });
}
```

### Integration Test:
```dart
import 'package:integration_test/integration_test.dart';

void main() {
  IntegrationTestWidgetsFlutterBinding.ensureInitialized();
  
  testWidgets('Full app integration test', (WidgetTester tester) async {
    // Ana uygulamayƒ± ba≈ülat
    await tester.pumpWidget(
      ProviderScope(
        child: MyApp(),
      ),
    );
    
    // ƒ∞lk sayfa y√ºklenene kadar bekle
    await tester.pumpAndSettle();
    
    // Navigation testleri
    // Provider testleri
    // UI testleri
  });
}
```

---

## üöÄ Avantajlarƒ±

1. **Merkezi Konfig√ºrasyon**: T√ºm uygulama ayarlarƒ± tek yerde
2. **Riverpod Entegrasyonu**: Provider'lar t√ºm uygulamada kullanƒ±labilir
3. **Modern Routing**: Go_Router ile geli≈ümi≈ü navigasyon
4. **Tema Y√∂netimi**: Dinamik tema deƒüi≈üimi
5. **Global Error Handling**: Merkezi hata y√∂netimi

---

## ‚ö†Ô∏è Dikkat Edilmesi Gerekenler

1. **Performans**: main.dart'da aƒüƒ±r i≈ülemler yapmayƒ±n
2. **Memory Leaks**: Global provider'larƒ± dikkatli kullanƒ±n
3. **Initialization Order**: Servisleri doƒüru sƒ±rada ba≈ülatƒ±n
4. **Error Boundaries**: Hata yakalama mekanizmalarƒ± kurun

---

## üîß ƒ∞pu√ßlarƒ±

### 1. Provider Override:
```dart
runApp(
  ProviderScope(
    overrides: [
      // Test i√ßin mock provider
      userServiceProvider.overrideWith((ref) => MockUserService()),
    ],
    child: MyApp(),
  ),
);
```

### 2. Environment Based Configuration:
```dart
void main() {
  const environment = String.fromEnvironment('ENV', defaultValue: 'dev');
  
  if (environment == 'production') {
    // Production ayarlarƒ±
  } else {
    // Development ayarlarƒ±
  }
  
  runApp(ProviderScope(child: MyApp()));
}
```

### 3. Custom Error Widget:
```dart
class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp.router(
      // Custom error widget
      builder: (context, child) {
        ErrorWidget.builder = (FlutterErrorDetails details) {
          return Scaffold(
            body: Center(
              child: Text('Bir hata olu≈ütu: ${details.exception}'),
            ),
          );
        };
        return child!;
      },
      routerConfig: AppRouter.router,
    );
  }
}
```

---

## üéì Sonu√ß

main.dart dosyasƒ±, Flutter uygulamanƒ±zƒ±n **kalbi**dir. Doƒüru konfig√ºrasyon ile:
- **Professional g√∂r√ºn√ºm**
- **Robust error handling** 
- **Efficient state management**
- **Modern navigation**

elde edebilirsiniz.

Bu dosyayƒ± ihtiyacƒ±nƒ±za g√∂re √∂zelle≈ütirerek harika kullanƒ±cƒ± deneyimleri olu≈üturabilirsiniz! 